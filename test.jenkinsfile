properties([
    parameters([
        booleanParam(defaultValue: true, name: 'SELECT_ALL'),
        [$class: 'ChoiceParameter', choiceType: 'PT_CHECKBOX', filterLength: 1, filterable: false, name: 'REPO_LIST', randomName: 'choice-parameter-1431964056666', script: [$class: 'GroovyScript', fallbackScript: [classpath: [], oldScript: '', sandbox: false, script: ''], script: [classpath: [], oldScript: '', sandbox: false, 
                script: '''
                    // def repos = ['repo1', 'repo2', 'repo3']  // Replace with your logic to fetch repositories
                    // if(SELECT_ALL) {
                    //     repos = repos.collect { it -> [value: it, selected: true] }

                    // }
                    // return repos
                    def repoNames = ['Repo 1', 'Repo 2', 'Repo 3']
                    def selectedRepos = SELECT_ALL ? repoNames : []

                    return repoNames.collect { repo ->
                        [value: repo, selected: selectedRepos.contains(repo)]
                    }
                   '''
                ]]]])])

pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                script {
                    // Use the selected repositories in your build steps
                    def selectedRepos = params.REPO_LIST
                    echo "Selected repositories: ${selectedRepos}"
                    
                    // Your build steps go here
                }
            }
        }
    }
}
